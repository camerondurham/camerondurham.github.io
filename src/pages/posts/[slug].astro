---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('posts');
  return posts.map(post => ({ params: { slug: post.slug }, props: { post } }));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<BaseLayout title={`${post.data.title} | Cameron Durham`}>
  <article class="post-detail">
    <header class="post-header">
      <h1>{post.data.title}</h1>
      <time datetime={post.data.date}>{post.data.date}</time>
    </header>
    {post.data.tags.length > 0 && (
      <div class="tags">
        {post.data.tags.map(tag => <a href={`/tags/${tag}`} class="tag">{tag}</a>)}
      </div>
    )}
    <div class="post-content">
      <Content />
    </div>
    <footer class="post-footer">
      <a href="/posts" class="back-link">‚Üê Back to posts</a>
    </footer>
  </article>
</BaseLayout>

<style>
.post-header { margin-bottom: 1rem; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; }
.post-header h1 { margin: 0 0 0.5rem 0; }
.tags { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
.tag { background: var(--bg-1); padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.85rem; color: var(--text-1); border-bottom: none !important; }
.tag:hover { background: var(--primary-color); color: var(--hover-color); }
.post-content { margin-bottom: 2rem; }
.post-footer { margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--border-color); }
</style>
